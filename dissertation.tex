\PassOptionsToPackage{numbers}{natbib}
\documentclass[12pt, proquest, natbib]{uwthesis}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[tracking=true]{microtype}
\usepackage{textcomp}

% MATH
\usepackage{amsmath, amsthm, amsfonts, amssymb}
\usepackage{thmtools}
\usepackage{mathtools}

%%% FONTS
\usepackage[scaled=.98, sups]{XCharter}
\usepackage[scaled=1.04, varqu, varl]{inconsolata}
\usepackage[scaled]{berasans}
\usepackage[xcharter, cmbraces, varg, vvarbb, scaled=1.07,
            subscriptcorrection]{newtxmath}
\usepackage[cal=boondoxo]{mathalfa}
\renewcommand*\copyright{{%
    \fontfamily{bch}\selectfont\textcopyright}}
\DisableLigatures{encoding=T1, family=tt*}
\let\emptyset\emptysetAlt

%%% GRAPHICS
\usepackage{graphicx}
\usepackage[usenames, svgnames]{xcolor}
\usepackage[hypcap=true]{subcaption}

%%% TYPESETTING
\usepackage[inline]{enumitem}
\usepackage{booktabs}
\usepackage{alltt}
\usepackage[super]{nth}
\usepackage{bm}

%%% UTILITIES
\usepackage{import}
\usepackage{adjustbox}
\usepackage{relsize}
\usepackage{scalerel}
\usepackage{twoopt}
\usepackage{etoolbox}
\usepackage{xspace}
\usepackage{hyphenat}
\usepackage[xspace]{ellipsis}
\usepackage[color=red!55, textsize=footnotesize, textwidth=1.3cm,
            shadow, prependcaption, obeyFinal, colorinlistoftodos]{todonotes}

%%% ALGORITHMS
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{listings}
\lstset{
    basicstyle = \small\ttfamily,
    stringstyle = \color{Brown},
    keywordstyle = \color{MediumBlue},
    commentstyle = \itshape\rmfamily\color{Green},
    showstringspaces = false,
    columns = flexible,
	breaklines = true,
	texcl = true,
	mathescape = true,
    tabsize = 4,
}
\lstalias[]{csharp}[Sharp]{C}
\lstdefinelanguage{dsl}{
    morekeywords = {language,feature,using,semantics,learners,int,string,@input,@start,values,let,in,@ref,@values,Tuple,@extern,@output,namespace,bool,std,@id,grammar},
    otherkeywords = {: = ,;, = >,:,[]},
    sensitive = true,
    morecomment = [l]{//},
    morestring = [b]',
}
\definecolor{linenum-gray}{HTML}{888888}
\renewcommand{\algorithmiccomment}[1]{ {\itshape \textsc{//} #1}}
\newcommand{\NoNumber}{\def\alglinenumber##1{}}
\newcommand{\WithNumber}{\def\alglinenumber##1{\sf\scriptsize\color{linenum-gray}##1:\hspace{-11pt}}}
\newcommand{\Functionx}[2]{\NoNumber \Function{#1}{#2} \addtocounter{ALG@line}{-1} \WithNumber}
\let\oldStatex\Statex
\renewcommand{\Statex}{\oldStatex \hspace{\algorithmicindent}}

%%% OPTIONS
% Whether to color hyperlinks in the PDF
\newtoggle{colorlinks}
\toggletrue{colorlinks}

%%% HYPERLINKS
\usepackage{url}
\usepackage[breaklinks=true, colorlinks=true, pdfauthor={Oleksandr Polozov}]{hyperref}
\iftoggle{colorlinks}{%
    \hypersetup{
        citecolor = DarkGreen,
        linkcolor = DarkBlue,
        menucolor = black,
        urlcolor = DarkBlue,
    }
}{%
    \hypersetup{
        citecolor = black,
        linkcolor = black,
        menucolor = black,
        urlcolor = black,
    }
}

%%% REFERENCES
\usepackage[capitalize]{cleveref}
\crefname{defn}{definition}{definitions}

%%% TYPOGRAPHIC SETUP
\makeatletter
    % Do not hyperlink \citeauthor{}
    \pretocmd{\NAT@citexnum}{\@ifnum{\NAT@ctype>\z@}{\let\NAT@hyper@\relax}{}}{}{}
    % Make \emph{} bold in an italicized environment
    \DeclareRobustCommand\em
        {\@nomath\em \ifdim \fontdimen\@ne\font >\z@
        \bfseries \else \itshape \fi}
\makeatother
\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000
\DeclareMathOperator*{\bigvsaunion}{\adjustbox{scale=1.6, valign=m, raise=-2pt}{$\bm{\mathsf{\cup}}$}}

%%% THEOREM-LIKE ENVIRONMENTS
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{defn}{Definition}
\theoremstyle{definition}
\newtheorem{example}{Example}
\newtheorem{problem}{Problem}
\newtheorem{scenario}{Scenario}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                     BEGIN DOCUMENT                         %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\include{macros}
\listoftodos\todototoc

%%% PRELIMINARY PAGES
\hypersetup{pageanchor=false}
\prelimpages
\include{title}
\include{abstract}
\tableofcontents
\listoffigures
\listoftables
\hypersetup{pageanchor=true}
\include{acks}

%%% CONTENT
\textpages
\subimport{intro/}{main}
\subimport{background/}{main}
\subimport{vsa/}{main}
\subimport{prose/}{main}
\subimport{interaction/}{main}
\include{conclusion}

%%% BIBLIOGRAPHY
\bibliographystyle{plainnat}
\bibliography{dissertation}

%%% APPENDICES
\appendix

\end{document}

